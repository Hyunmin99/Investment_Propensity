{"ast":null,"code":"var _jsxFileName = \"/Users/kwonhyunmin/Documents/GitHub/Investment_Propensity/src/component/Retirement.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport FormControl from \"@mui/material/FormControl\";\nimport { Box, Input } from \"@mui/material\";\nimport { ComposedChart, XAxis, YAxis, Tooltip, CartesianGrid, Line, Area } from \"recharts\";\nimport { CompoundContribution } from \"../calculate/Calculator\";\nimport { ROUNDTWO, MUTUAL, FV, COMPOUND } from \"../calculate/Formula\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Retirement(_ref) {\n  _s();\n\n  let {\n    Pro,\n    Min,\n    Max,\n    Age\n  } = _ref;\n  const [PresentAge, getPresentAge] = useState(Age); //현재나이\n\n  const [RetireAge, getRetireAge] = useState(70); //은퇴나이\n\n  const [ReceivePeriod, getReceivePeriod] = useState(15); //수령기간\n\n  const [MonthExpense, getMonthExpense] = useState(180); //월 노후 생활비\n\n  const [P, getP] = useState(0); //초기 투자 금액\n\n  let PMT = 0; //년 적립 금액\n\n  let GoalMoney = 0; //목표 금액\n\n  let AccumulatePeriod = RetireAge - PresentAge; //적립기간 (현재 ~ 은퇴 전)\n\n  let exceptP = 0; //SUM - Compund(P) : 년 적립 금액 구하기 위함\n\n  console.log(\"******은퇴 계산기******\");\n  console.log(\"현재 나이:\", PresentAge);\n  console.log(\"은퇴 연령:\", RetireAge);\n  console.log(\"적립 기간:\", AccumulatePeriod);\n  console.log(\"은퇴 자금 수령 기간:\", ReceivePeriod);\n  console.log(\"월 생활비:\", MonthExpense);\n\n  const handlePresentAge = event => {\n    getPresentAge(parseInt(event.target.value));\n  };\n\n  const handleRetireAge = event => {\n    getRetireAge(parseInt(event.target.value));\n  };\n\n  const handleReceivePeriod = event => {\n    getReceivePeriod(parseInt(event.target.value));\n  };\n\n  const handleMonthExpense = event => {\n    getMonthExpense(parseInt(event.target.value));\n  };\n\n  const handleP = event => {\n    getP(parseInt(event.target.value));\n  };\n\n  const formatYAxis = tickItem => {\n    let Money = tickItem;\n    const units = [\"만원\", \"억원\"];\n    let unitIndex = 0;\n\n    while (Money >= 10000 && unitIndex < units.length - 1) {\n      unitIndex += 1;\n      Money /= 10000;\n      Money = ROUNDTWO(Money);\n    }\n\n    return `${Money.toLocaleString()}${units[unitIndex]}`;\n  };\n\n  const formatTooltip = (value, name) => {\n    let Money = value;\n    let unitIndex = 0;\n    const units = [\"만원\", \"억원\"];\n\n    if (name === \"예상수익범위\") {\n      const NewValue = value.map(Money => {\n        while (Money >= 10000 && unitIndex < units.length - 1) {\n          unitIndex += 1;\n          Money /= 10000;\n          Money = ROUNDTWO(Money);\n        }\n\n        return `${Money.toLocaleString()}${units[unitIndex]}`;\n      });\n      return [`${NewValue[0]} ~ ${NewValue[1]}`, \"예상수익범위\"];\n    } else {\n      while (Money >= 10000 && unitIndex < units.length - 1) {\n        unitIndex += 1;\n        Money /= 10000;\n        Money = ROUNDTWO(Money);\n      }\n\n      return `${Money.toLocaleString()}${units[unitIndex]}`;\n    }\n  }; //Goal 금액 정하기, 수령기간 데이터 만들기\n\n\n  let ReceiveYears = [];\n\n  if (isNaN(ReceivePeriod)) {\n    ReceiveYears = [...new Array(0)].map((_, i) => AccumulatePeriod + i + 1).reverse();\n  } else {\n    ReceiveYears = [...new Array(ReceivePeriod)].map((_, i) => AccumulatePeriod + i + 1).reverse();\n  }\n\n  GoalMoney = FV(MonthExpense * 12, AccumulatePeriod + 1) * (1.02 ** ReceivePeriod - 1) / (1.02 - 1);\n  let ReceiveYears2 = [];\n\n  if (isNaN(ReceivePeriod)) {\n    ReceiveYears2 = [...new Array(0)].map((_, i) => AccumulatePeriod + i + 1);\n  } else {\n    ReceiveYears2 = [...new Array(ReceivePeriod)].map((_, i) => AccumulatePeriod + i + 1);\n  }\n\n  let temp_asset = GoalMoney;\n  let temp_invest = GoalMoney;\n  const ReceiveData2 = ReceiveYears2.map(function (t) {\n    temp_asset = temp_asset - FV(MonthExpense * 12, t); // temp_invest = (temp_invest - FV(MonthExpense * 12, t)) * (Pro / 100 + 1);\n\n    temp_invest = COMPOUND(temp_invest - FV(MonthExpense * 12, t), Pro, 1);\n    console.log(t, temp_asset);\n    const obj = {\n      year: t + \"년\",\n      자산: ROUNDTWO(temp_asset),\n      투자시자산: ROUNDTWO(temp_invest)\n    };\n    return obj;\n  });\n  console.log(ReceiveData2);\n  let SUM = 0;\n  const ReceiveData = ReceiveYears.map(function (t) {\n    const obj = {\n      year: t + \"년\",\n      자산: ROUNDTWO(SUM)\n    };\n    SUM = SUM + FV(MonthExpense * 12, t);\n    return obj;\n  });\n  console.log(ReceiveData);\n  console.log(\"한번에 다 더하는 방법\", FV(MonthExpense * 12, AccumulatePeriod + 1) * (1.02 ** ReceivePeriod - 1) / (1.02 - 1)); //초기투자금액 복리 계산, 총 계산에서 뺴기 -> exceptP\n\n  exceptP = GoalMoney - COMPOUND(P, Pro, AccumulatePeriod);\n  console.log(\"목표금액-초기투자금액\", exceptP); //exceptP와 적립식 GBI로 년적립금 구하기\n\n  PMT = MUTUAL(exceptP, Pro, AccumulatePeriod); // console.log(\"년 적립금액:\", PMT);\n  //적립기간 데이터 만들기\n\n  const AccumulateYears = Array.from({\n    length: parseInt(AccumulatePeriod) + 1\n  }, (_, i) => i);\n  const AccumulateData = AccumulateYears.map(function (t) {\n    return CompoundContribution(P, PMT, t, Min, Max, Pro);\n  });\n  console.log(\"적립 기간 데이터:\", AccumulateData);\n  console.log(\"수령 기간 데이터:\", ReceiveData); //그래프 데이터 만들기 (합치기, 소팅)\n\n  const data = [...AccumulateData, ...ReceiveData2].sort(function (a, b) {\n    return parseInt(a.year) - parseInt(b.year);\n  }); // console.log(data);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"1rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        margin: \"0.3rem 0\"\n      },\n      children: \"\\uD83C\\uDFDD \\uC740\\uD1F4 \\uACC4\\uC0B0\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Description\",\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uD604\\uC7AC \\uB098\\uC774\\uB294 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"PresentAge\",\n            value: PresentAge,\n            onChange: handlePresentAge,\n            inputProps: {\n              pattern: \"[0-9]*\"\n            },\n            size: \"small\",\n            type: \"number\",\n            sx: {\n              width: \"48px\",\n              ml: \"0.5rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC0B4\\uC774\\uACE0, \\uC740\\uD1F4\\uB294\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"RetireAge\",\n            value: RetireAge,\n            onChange: handleRetireAge,\n            inputProps: {\n              pattern: \"[0-9]*\"\n            },\n            type: \"number\",\n            size: \"small\",\n            sx: {\n              width: \"48px\",\n              textAlign: \"right\",\n              ml: \"0.5rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC0B4\\uC5D0 \\uD560 \\uAC83 \\uAC19\\uC544\\uC694.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC740\\uD1F4 \\uD6C4\\uC5D0\\uB294 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"ReceivePeriod\",\n            value: ReceivePeriod,\n            onChange: handleReceivePeriod,\n            inputProps: {\n              pattern: \"[0-9]*\"\n            },\n            type: \"number\",\n            size: \"small\",\n            sx: {\n              width: \"48px\",\n              ml: \"0.5rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB144\\uAC04 \\uB9E4\\uC6D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"MonthExpense\",\n            value: MonthExpense,\n            onChange: handleMonthExpense,\n            inputProps: {\n              pattern: \"[0-9]*\"\n            },\n            type: \"number\",\n            size: \"small\",\n            sx: {\n              width: \"64px\",\n              textAlign: \"right\",\n              ml: \"0.5rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB9CC\\uC6D0\\uC758 \\uC0DD\\uD65C\\uBE44\\uB85C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uCD94\\uAC00 \\uC218\\uC785 \\uC5C6\\uC774 \\uC0B4\\uAC70\\uC5D0\\uC694. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"(\\uCD08\\uAE30 \\uD22C\\uC790\\uAE08\\uC740 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"P\",\n            value: P,\n            onChange: handleP,\n            inputProps: {\n              pattern: \"[0-9]*\"\n            },\n            type: \"number\",\n            size: \"small\",\n            sx: {\n              width: \"64px\",\n              textAlign: \"right\",\n              ml: \"0.5rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB9CC\\uC6D0\\uC774\\uC5D0\\uC694)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: \"#F4F3F4\",\n          width: \"100%\",\n          margin: \"1rem 0\",\n          padding: \"0.5rem 1.2rem\",\n          borderRadius: \"0.8rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"0.8rem\"\n          },\n          children: [\"\\uC740\\uD1F4 \\uBAA9\\uD45C\\uB97C \\uC774\\uB8E8\\uAE30 \\uC704\\uD574 \\uB9E4\\uB144 \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: ROUNDTWO(PMT)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 30\n          }, this), \"\\uB9CC\\uC6D0\\uC744 \\uB123\\uC5B4\\uC57C\\uD574\\uC694!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uC740\\uD1F4 \\uBAA9\\uD45C\\uB97C \\uC774\\uB8E8\\uAE30 \\uC704\\uD574 \\uB9E4\\uC6D4 \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: ROUNDTWO(PMT / 12)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 30\n          }, this), \"\\uB9CC\\uC6D0\\uC744 \\uB123\\uC5B4\\uC57C\\uD574\\uC694!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uBAA9\\uD45C\\uB294 \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: AccumulatePeriod\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this), \"\\uB144\\uAC04 \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: ROUNDTWO(GoalMoney)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 45\n          }, this), \"\\uB9CC\\uC6D0 \\uBAA8\\uC73C\\uAE30!!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ComposedChart, {\n      width: 400,\n      height: 250,\n      margin: {\n        top: 20,\n        bottom: 20\n      },\n      data: data,\n      children: [/*#__PURE__*/_jsxDEV(XAxis, {\n        dataKey: \"year\",\n        tick: {\n          fontSize: 10\n        },\n        padding: {\n          right: 20\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n        tick: {\n          fontSize: 10\n        },\n        padding: {\n          bottom: 10\n        },\n        domain: [\"auto\", \"auto\"],\n        tickFormatter: formatYAxis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        formatter: formatTooltip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CartesianGrid, {\n        stroke: \"#f4f4f4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        type: \"monotone\",\n        dataKey: \"\\uC790\\uC0B0\",\n        stroke: \"#1D1A82\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        type: \"monotone\",\n        dataKey: \"\\uD22C\\uC790\\uC2DC\\uC790\\uC0B0\",\n        stroke: \"#FFB950\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Area, {\n        type: \"monotone\",\n        dataKey: \"\\uC608\\uC0C1\\uC218\\uC775\\uBC94\\uC704\",\n        fill: \"#FFB950\",\n        stroke: \"#FFB950\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Retirement, \"PjNyo5G9/BwqDVKpbft6VEhbEYM=\");\n\n_c = Retirement;\nexport default Retirement;\n\nvar _c;\n\n$RefreshReg$(_c, \"Retirement\");","map":{"version":3,"sources":["/Users/kwonhyunmin/Documents/GitHub/Investment_Propensity/src/component/Retirement.js"],"names":["React","useState","FormControl","Box","Input","ComposedChart","XAxis","YAxis","Tooltip","CartesianGrid","Line","Area","CompoundContribution","ROUNDTWO","MUTUAL","FV","COMPOUND","Retirement","Pro","Min","Max","Age","PresentAge","getPresentAge","RetireAge","getRetireAge","ReceivePeriod","getReceivePeriod","MonthExpense","getMonthExpense","P","getP","PMT","GoalMoney","AccumulatePeriod","exceptP","console","log","handlePresentAge","event","parseInt","target","value","handleRetireAge","handleReceivePeriod","handleMonthExpense","handleP","formatYAxis","tickItem","Money","units","unitIndex","length","toLocaleString","formatTooltip","name","NewValue","map","ReceiveYears","isNaN","Array","_","i","reverse","ReceiveYears2","temp_asset","temp_invest","ReceiveData2","t","obj","year","자산","투자시자산","SUM","ReceiveData","AccumulateYears","from","AccumulateData","data","sort","a","b","marginTop","margin","display","pattern","width","ml","textAlign","backgroundColor","padding","borderRadius","top","bottom","fontSize","right"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport FormControl from \"@mui/material/FormControl\";\nimport { Box, Input } from \"@mui/material\";\nimport {\n  ComposedChart,\n  XAxis,\n  YAxis,\n  Tooltip,\n  CartesianGrid,\n  Line,\n  Area,\n} from \"recharts\";\nimport { CompoundContribution } from \"../calculate/Calculator\";\nimport { ROUNDTWO, MUTUAL, FV, COMPOUND } from \"../calculate/Formula\";\n\nfunction Retirement({ Pro, Min, Max, Age }) {\n  const [PresentAge, getPresentAge] = useState(Age); //현재나이\n  const [RetireAge, getRetireAge] = useState(70); //은퇴나이\n  const [ReceivePeriod, getReceivePeriod] = useState(15); //수령기간\n  const [MonthExpense, getMonthExpense] = useState(180); //월 노후 생활비\n  const [P, getP] = useState(0); //초기 투자 금액\n\n  let PMT = 0; //년 적립 금액\n  let GoalMoney = 0; //목표 금액\n  let AccumulatePeriod = RetireAge - PresentAge; //적립기간 (현재 ~ 은퇴 전)\n  let exceptP = 0; //SUM - Compund(P) : 년 적립 금액 구하기 위함\n\n  console.log(\"******은퇴 계산기******\");\n  console.log(\"현재 나이:\", PresentAge);\n  console.log(\"은퇴 연령:\", RetireAge);\n  console.log(\"적립 기간:\", AccumulatePeriod);\n  console.log(\"은퇴 자금 수령 기간:\", ReceivePeriod);\n  console.log(\"월 생활비:\", MonthExpense);\n\n  const handlePresentAge = (event) => { getPresentAge(parseInt(event.target.value)); };\n  const handleRetireAge = (event) => { getRetireAge(parseInt(event.target.value)); };  \n  const handleReceivePeriod = (event) => { getReceivePeriod(parseInt(event.target.value)); };  \n  const handleMonthExpense = (event) => { getMonthExpense(parseInt(event.target.value)); };\n  const handleP = (event) => { getP(parseInt(event.target.value)); };\n  const formatYAxis = (tickItem) => {\n    let Money = tickItem;\n\n    const units = [\"만원\", \"억원\"];\n    let unitIndex = 0;\n\n    while (Money >= 10000 && unitIndex < units.length - 1) {\n      unitIndex += 1;\n      Money /= 10000;\n      Money = ROUNDTWO(Money);\n    }\n    return `${Money.toLocaleString()}${units[unitIndex]}`;\n  };\n  const formatTooltip = (value, name) => {\n    let Money = value;\n    let unitIndex = 0;\n    const units = [\"만원\", \"억원\"];\n\n    if (name === \"예상수익범위\") {\n      const NewValue = value.map((Money) => {\n        while (Money >= 10000 && unitIndex < units.length - 1) {\n          unitIndex += 1;\n          Money /= 10000;\n          Money = ROUNDTWO(Money);\n        }\n        return `${Money.toLocaleString()}${units[unitIndex]}`;\n      });\n      return [`${NewValue[0]} ~ ${NewValue[1]}`, \"예상수익범위\"];\n    } else {\n      while (Money >= 10000 && unitIndex < units.length - 1) {\n        unitIndex += 1;\n        Money /= 10000;\n        Money = ROUNDTWO(Money);\n      }\n      return `${Money.toLocaleString()}${units[unitIndex]}`;\n    }\n  };\n\n  //Goal 금액 정하기, 수령기간 데이터 만들기\n  let ReceiveYears = [];\n  if (isNaN(ReceivePeriod)) {\n    ReceiveYears = [...new Array(0)]\n      .map((_, i) => AccumulatePeriod + i + 1)\n      .reverse();\n  }\n  else {\n    ReceiveYears = [...new Array(ReceivePeriod)]\n      .map((_, i) => AccumulatePeriod + i + 1)\n      .reverse();\n  }\n\n  GoalMoney =\n    (FV(MonthExpense * 12, AccumulatePeriod + 1) * (1.02 ** ReceivePeriod - 1)) /\n    (1.02 - 1);\n  let ReceiveYears2 = [];\n  if (isNaN(ReceivePeriod)) {\n    ReceiveYears2 = [...new Array(0)]\n      .map((_, i) => AccumulatePeriod + i + 1)\n  } else {\n    ReceiveYears2 = [...new Array(ReceivePeriod)]\n      .map((_, i) => AccumulatePeriod + i + 1)\n  }\n  let temp_asset = GoalMoney;\n  let temp_invest = GoalMoney;\n  const ReceiveData2 = ReceiveYears2.map(function (t) {\n    temp_asset = temp_asset - FV(MonthExpense * 12, t);\n    // temp_invest = (temp_invest - FV(MonthExpense * 12, t)) * (Pro / 100 + 1);\n    temp_invest = COMPOUND(temp_invest - FV(MonthExpense * 12, t),Pro,1);\n    console.log(t,temp_asset);\n    const obj = {\n      year: t + \"년\",\n      자산: ROUNDTWO(temp_asset),\n      투자시자산: ROUNDTWO(temp_invest),\n    };\n    return obj;\n  })\n  console.log(ReceiveData2);\n  \n  let SUM = 0;\n  const ReceiveData = ReceiveYears.map(function (t) {\n    const obj = {\n      year: t + \"년\",\n      자산: ROUNDTWO(SUM),\n    };\n    SUM = SUM + FV(MonthExpense*12, t);\n    return obj;\n  })\n  console.log(ReceiveData);\n  console.log(\"한번에 다 더하는 방법\",FV(MonthExpense * 12, AccumulatePeriod+1) * (1.02**ReceivePeriod-1)/(1.02-1));\n  //초기투자금액 복리 계산, 총 계산에서 뺴기 -> exceptP\n  exceptP = GoalMoney - COMPOUND(P, Pro, AccumulatePeriod);\n  console.log(\"목표금액-초기투자금액\", exceptP);\n  //exceptP와 적립식 GBI로 년적립금 구하기\n  PMT = MUTUAL(exceptP, Pro, AccumulatePeriod);\n  // console.log(\"년 적립금액:\", PMT);\n  //적립기간 데이터 만들기\n  const AccumulateYears = Array.from(\n    { length: parseInt(AccumulatePeriod) + 1 },\n    (_, i) => i\n  );\n  const AccumulateData = AccumulateYears.map(function (t) {\n    return CompoundContribution(P, PMT, t, Min, Max, Pro);\n  })\n  console.log(\"적립 기간 데이터:\", AccumulateData);\n  console.log(\"수령 기간 데이터:\", ReceiveData);\n  //그래프 데이터 만들기 (합치기, 소팅)\n  const data = [...AccumulateData, ...ReceiveData2].sort(function(a, b) {\n    return parseInt(a.year) - parseInt(b.year);\n  });\n  // console.log(data);\n\n  return (\n    <div style={{ marginTop: \"1rem\" }}>\n      <h3 style={{ margin: \"0.3rem 0\" }}>🏝 은퇴 계산기</h3>\n      <div className=\"Description\" style={{ marginTop: \"1rem\" }}>\n        <span>현재 나이는 </span>\n        <Box sx={{ display: \"flex\" }}>\n          <FormControl variant=\"standard\">\n            <Input\n              id=\"PresentAge\"\n              value={PresentAge}\n              onChange={handlePresentAge}\n              inputProps={{ pattern: \"[0-9]*\" }}\n              size=\"small\"\n              type=\"number\"\n              sx={{ width: \"48px\", ml: \"0.5rem\" }}\n            />\n          </FormControl>\n        </Box>\n        <span>살이고, 은퇴는</span>\n        <Box sx={{ display: \"flex\" }}>\n          <FormControl variant=\"standard\">\n            <Input\n              id=\"RetireAge\"\n              value={RetireAge}\n              onChange={handleRetireAge}\n              inputProps={{ pattern: \"[0-9]*\" }}\n              type=\"number\"\n              size=\"small\"\n              sx={{ width: \"48px\", textAlign: \"right\", ml: \"0.5rem\" }}\n            />\n          </FormControl>\n        </Box>\n        <span>살에 할 것 같아요.</span>\n        <br />\n        <span>은퇴 후에는 </span>\n        <Box sx={{ display: \"flex\" }}>\n          <FormControl variant=\"standard\">\n            <Input\n              id=\"ReceivePeriod\"\n              value={ReceivePeriod}\n              onChange={handleReceivePeriod}\n              inputProps={{ pattern: \"[0-9]*\" }}\n              type=\"number\"\n              size=\"small\"\n              sx={{ width: \"48px\", ml: \"0.5rem\" }}\n            />\n          </FormControl>\n        </Box>\n        <span>년간 매월</span>\n        <Box sx={{ display: \"flex\" }}>\n          <FormControl variant=\"standard\">\n            <Input\n              id=\"MonthExpense\"\n              value={MonthExpense}\n              onChange={handleMonthExpense}\n              inputProps={{ pattern: \"[0-9]*\" }}\n              type=\"number\"\n              size=\"small\"\n              sx={{ width: \"64px\", textAlign: \"right\", ml: \"0.5rem\" }}\n            />\n          </FormControl>\n        </Box>\n        <span>만원의 생활비로</span>\n        <span>추가 수입 없이 살거에요. </span>\n        <br />\n        <span>(초기 투자금은 </span>\n        <Box sx={{ display: \"flex\" }}>\n          <FormControl variant=\"standard\">\n            <Input\n              id=\"P\"\n              value={P}\n              onChange={handleP}\n              inputProps={{ pattern: \"[0-9]*\" }}\n              type=\"number\"\n              size=\"small\"\n              sx={{ width: \"64px\", textAlign: \"right\", ml: \"0.5rem\" }}\n            />\n          </FormControl>\n        </Box>\n        <span>만원이에요)</span>\n        <div\n          style={{\n            backgroundColor: \"#F4F3F4\",\n            width: \"100%\",\n            margin: \"1rem 0\",\n            padding: \"0.5rem 1.2rem\",\n            borderRadius: \"0.8rem\",\n          }}\n        >\n          <div style={{ marginTop: \"0.8rem\" }}>\n            은퇴 목표를 이루기 위해 매년 <b>{ROUNDTWO(PMT)}</b>만원을\n            넣어야해요!\n          </div>\n          <div>\n            은퇴 목표를 이루기 위해 매월 <b>{ROUNDTWO(PMT / 12)}</b>만원을\n            넣어야해요!\n          </div>\n          <div>\n            목표는 <b>{AccumulatePeriod}</b>년간 <b>{ROUNDTWO(GoalMoney)}</b>\n            만원 모으기!!\n          </div>\n        </div>\n      </div>\n\n      <ComposedChart\n        width={400}\n        height={250}\n        margin={{ top: 20, bottom: 20 }}\n        data={data}\n      >\n        <XAxis dataKey=\"year\" tick={{ fontSize: 10 }} padding={{ right: 20 }} />\n        <YAxis\n          tick={{ fontSize: 10 }}\n          padding={{ bottom: 10 }}\n          domain={[\"auto\", \"auto\"]}\n          tickFormatter={formatYAxis}\n        />\n        <Tooltip formatter={formatTooltip} />\n        {/* <Legend tick={{ fontSize: 10 }} /> */}\n        <CartesianGrid stroke=\"#f4f4f4\" />\n        <Line type=\"monotone\" dataKey=\"자산\" stroke=\"#1D1A82\" />\n        <Line type=\"monotone\" dataKey=\"투자시자산\" stroke=\"#FFB950\" />\n        <Area\n          type=\"monotone\"\n          dataKey=\"예상수익범위\"\n          fill=\"#FFB950\"\n          stroke=\"#FFB950\"\n        />\n      </ComposedChart>\n    </div>\n  );\n}\n\nexport default Retirement;\n"]},"metadata":{},"sourceType":"module"}